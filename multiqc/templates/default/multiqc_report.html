<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="description" content="MultiQC: A modular tool to aggregate results from bioinformatics analyses across many samples into a single report">
  <meta name="author" content="MultiQC">
  <title>{{ config.title + ': ' if config.title != None }}MultiQC Report</title>

  <link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,{{ include_file('assets/img/favicon-32x32.png', b64=True) }}">
  <link rel="icon" type="image/png" sizes="96x96" href="data:image/png;base64,{{ include_file('assets/img/favicon-96x96.png', b64=True) }}">
  <link rel="icon" type="image/png" sizes="16x16" href="data:image/png;base64,{{ include_file('assets/img/favicon-16x16.png', b64=True) }}">
  
  <!-- Include CSS -->
  <style type="text/css">
    @font-face{
      font-family:'Glyphicons Halflings';
      src:url(data:font/eot;base64,{{ include_file('assets/fonts/glyphicons-halflings-regular.eot', b64=True) }});
      src:url(data:font/eot;base64,{{ include_file('assets/fonts/glyphicons-halflings-regular.eot', b64=True) }}) format('embedded-opentype'),
          url(data:x-font-woff/woff2;base64,{{ include_file('assets/fonts/glyphicons-halflings-regular.woff2', b64=True) }}) format('woff2'),
          url(data:x-font-woff/woff;base64,{{ include_file('assets/fonts/glyphicons-halflings-regular.woff', b64=True) }}) format('woff'),
          url(data:font/ttf;base64,{{ include_file('assets/fonts/glyphicons-halflings-regular.ttf', b64=True) }}) format('truetype'),
          url(data:image/svg;base64,{{ include_file('assets/fonts/glyphicons-halflings-regular.svg', b64=True) }}) format('svg');
    }
  </style>
  <style type="text/css">{{ include_file('assets/css/bootstrap.min.css') }}</style>
  <style type="text/css">{{ include_file('assets/css/bootstrap-tour.min.css') }}</style>
  <style type="text/css">{{ include_file('assets/css/default_multiqc.css') }}</style>
  {%- for m in report.modules_output %}{% if m.css and m.css|length > 0 -%}{% for css_href in m.css %}
  <style type="text/css">{{ include_file(css_href, None) }}</style>
  {%- endfor %}{% endif %}{% endfor %}
  
  <!-- Include javascript files -->
  <script type="text/javascript">{{ include_file('assets/js/packages/jquery-1.11.3.min.js') }}</script>
  <script type="text/javascript">{{ include_file('assets/js/packages/jquery-ui.min.js') }}</script>
  <script type="text/javascript">{{ include_file('assets/js/packages/bootstrap.min.js') }}</script>
  <script type="text/javascript">{{ include_file('assets/js/packages/bootstrap-tour.min.js') }}</script>
  <script type="text/javascript">{{ include_file('assets/js/packages/highcharts.js') }}</script>
  <script src="http://code.highcharts.com/modules/exporting.js"></script>
  <script type="text/javascript">{{ include_file('assets/js/packages/chroma.min.js') }}</script>
  <script type="text/javascript">{{ include_file('assets/js/packages/jquery.tablesorter.min.js') }}</script>
  <script type="text/javascript">{{ include_file('assets/js/packages/FileSaver.min.js') }}</script>
  <script type="text/javascript">{{ include_file('assets/js/multiqc.js') }}</script>
  <script type="text/javascript">{{ include_file('assets/js/multiqc_generalstats.js') }}</script>
  <script type="text/javascript">{{ include_file('assets/js/multiqc_toolbox.js') }}</script>
  <script type="text/javascript">{{ include_file('assets/js/multiqc_plotting.js') }}</script>
  <script type="text/javascript">{{ include_file('assets/js/multiqc_tour.js') }}</script>
  <script src="multiqc_config.js"></script>
  {%- for m in report.modules_output %}{% if m.js and m.js|length > 0 -%}{% for js_href in m.js %}
  <script type="text/javascript">{{ include_file( js_href, None ) }}</script>
  {%- endfor %}{% endif %}{% endfor %}

</head>
<body>

<div class="side-nav">
  <h1>
    <a href="#top">
      <img src="data:image/png;base64,{{ include_file('assets/img/MultiQC_logo.png', b64=True) }}" title="MultiQC"><br>
      <small>v{{ config.version }}</small>
    </a>
  </h1>
  <ul class="mqc-nav">
    {% if report.general_stats_html['headers']|length > 0 %}
    <li><a href="#general_stats">General Stats</a></li>
    {% endif -%}
    {% for m in report.modules_output %}
    <li>
      <a href="#{{ m.anchor }}">{{ m.name }}</a>
      <ul>
      {% for s in m.sections -%}
        <li><a href="#{{ s['anchor'] }}">{{ s['name']|striptags }}</a></li>
      {%- endfor %}
      </ul>
    </li>
    {% endfor %}
  </ul>
</div>
<div class="mqc-toolbox">
  <div class="mqc-toolbox-buttons visible-md-block visible-lg-block">
    <span class="mqc-toolbox-label">Toolbox</span>
    <ul>
      <li><a href="#mqc_cols" title="Highlight" data-placement="left" data-toggle="tooltip"><span class="glyphicon glyphicon-pushpin"></span></a></li>
      <li><a href="#mqc_renamesamples" title="Rename" data-placement="left" data-toggle="tooltip"><span class="glyphicon glyphicon-font"></span></a></li>
      <li><a href="#mqc_hidesamples" title="Hide" data-placement="left" data-toggle="tooltip"><span class="glyphicon glyphicon-eye-close"></span></a></li>
      <li><a href="#mqc_saveconfig" title="Save" data-placement="left" data-toggle="tooltip"><span class="glyphicon glyphicon-floppy-disk"></span></a></li>
    </ul>
  </div>
  <div class="mqc-toolbox-wrapper">
    <div class="row">
      <div class="mqc-toolbox-header visible-md-block visible-lg-block">
        <h3>MultiQC Toolbox</h3>
      </div>
      <div id="mqc_cols" class="mqc_filter_section col-sm-4 col-md-12">
        <h4>Highlight Samples</h4>
        <form class="form-inline" id="mqc_color_form">
          <input id="mqc_colour_filter" type="text" placeholder="Custom Pattern" class="form-control input-sm">
          <input id="mqc_colour_filter_color" type="color" value="#e41a1c" class="form-control input-sm">
          <button type="submit" id="mqc_colour_filter_update" class="btn btn-default btn-sm">+</button>
        </form>
        <p class="mqc_regex_mode">Regex mode <span class="off">off</span></p>
        <ul id="mqc_col_filters" class="mqc_filters"></ul>
      </div>
      <div id="mqc_renamesamples" class="mqc_filter_section col-sm-4 col-md-12">
        <h4>Rename Samples</h4>
        <form class="form-inline" id="mqc_renamesamples_form">
          <input id="mqc_renamesamples_from" type="text" placeholder="From" class="form-control input-sm">
          <input id="mqc_renamesamples_to" type="text" placeholder="To" class="form-control input-sm">
          <button type="submit" id="mqc_renamesamples_filter_update" class="btn btn-default btn-sm">+</button>
        </form>
        <p><a data-toggle="collapse" href="#mqc_renamesamples_bulk_collapse">Click here for bulk input.</a></p>
        <div class="collapse" id="mqc_renamesamples_bulk_collapse">
          <p>Paste two columns of a tab-delimited table here (eg. from Excel).</p>
          <p>First column should be the old name, second column the new name.</p>
          <form id="mqc_renamesamples_bulk_form">
            <textarea class="form-control" rows="5"></textarea>
            <button type="submit" id="mqc_renamesamples_bulk_update" class="btn btn-default btn-sm">Add</button>
          </form>
        </div>
        <p class="mqc_regex_mode">Regex mode <span class="off">off</span></p>
        <ul id="mqc_renamesamples_filters" class="mqc_filters"></ul>
      </div>
      <div id="mqc_hidesamples" class="mqc_filter_section col-sm-4 col-md-12">
        <h4>Hide Samples</h4>
        <form class="form-inline" id="mqc_hidesamples_form">
          <input id="mqc_hidesamples_filter" type="text" placeholder="Custom Pattern" class="form-control input-sm">
          <button type="submit" id="mqc_hidesamples_filter_update" class="btn btn-default btn-sm">+</button>
        </form>
        {% if report.general_stats_html['rows'] | length > 10 %}<p>Warning! This can take a few seconds.</p>{% endif %}
        <p class="mqc_regex_mode">Regex mode <span class="off">off</span></p>
        <ul id="mqc_hidesamples_filters" class="mqc_filters"></ul>
      </div>
    </div>
    <div id="mqc_saveconfig" class="mqc_filter_section">
      <div class="row">
        <div class="bs-col col-sm-12">
          <h4>Save Settings</h4>
        </div>
      </div>
      <div class="row">
        <div class="bs-col col-sm-4 col-md-12 mqc-save-config-report-section">
          <h5>Report Settings</h5>
          <p>You can save the toolbox settings for this report to the browser.</p>
          <p><a href="#" data-target="report" data-action="save" class="mqc_saveconfig_btn btn btn-sm btn-default"><span class="glyphicon glyphicon-floppy-disk"></span> Save</a>
             <a href="#" data-target="report" data-action="clear" class="mqc_saveconfig_btn btn btn-sm btn-default"><span class="glyphicon glyphicon-trash"></span> Clear</a></p>
          <hr>
        </div>
        <div class="bs-col col-sm-4 col-md-12 mqc-save-config-global-section">
          <h5>Global Settings</h5>
          <p>If your settings are more general, you can save them to your browser 
            and have them applied to every MultiQC report you open.</p>
          <p><a href="#" data-target="global" data-action="save" class="mqc_saveconfig_btn btn btn-sm btn-default"><span class="glyphicon glyphicon-floppy-disk"></span> Save</a>
             <a href="#" data-target="global" data-action="clear" class="mqc_saveconfig_btn btn btn-sm btn-default"><span class="glyphicon glyphicon-trash"></span> Clear</a></p>
          <hr>
        </div>
        <div class="bs-col col-sm-4 col-md-12 mqc-save-config-file-section">
          <h5>Save to file</h5>
          <p>You can also save a config file to directory containing the report. Your settings
            will be applied the next time you open this report, and can be shared with others.</p>
          <p><a href="#" data-target="file" class="mqc_saveconfig_btn btn btn-sm btn-default"><span class="glyphicon glyphicon-download-alt"></span> Download Config File</a></p>
        </div>
      </div>
    </div>
  </div>
  <a href="#top" class="mqc-toplink" title="Go to top"><span class="glyphicon glyphicon-chevron-up"></span></a>
</div>

<div class="mainpage">

  <h1 id="page_title"><a href="https://github.com/ewels/MultiQC" target="_blank"><img src="data:image/png;base64,{{ include_file('assets/img/MultiQC_logo.png', b64=True) }}" title="MultiQC"></a></h1>
  {{ '<h2>'+config.title+'</h2>' if config.title != None }}
  <p class="lead">A modular tool to aggregate results from bioinformatics analyses across many samples into a single report.</p>
  <p>Report generated on {{ config.creation_date }} based on data in <code id="mqc_analysis_path">{{ config.analysis_dir |join('</code> and <code id="mqc_analysis_path">') }}</code></p>
  <div class="alert alert-info alert-dismissible hidden-print mqc-into-tour-alert">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
    <strong>Welcome!</strong> There's a lot you can do here!
    <button id="mqc-launch-into-tour" class="btn btn-info btn-sm">Take the tour</button>
  </div>
  
  {% if report.general_stats_html['headers']|length > 0 %}
  <div id="general_stats">
    <h2>
      General Statistics &nbsp;
      <button type="button" class="btn btn-default btn-sm" data-toggle="modal" data-target="#general_stats_colsort_modal">Configure Columns</button>
    </h2>
    <div id="general_stats_table_container">
      <div class="table-responsive">
        <table id="general_stats_table" class="table table-condensed mqc_table">
          <thead>
            <tr>
              <td class="sorthandle">&nbsp;</td>
              <th class="rowheader">Sample Name</th>
              {%- for k, h in report.general_stats_html['headers'].items() %}
                {{ h }}
              {%- endfor -%}
            </tr>
          </thead>
          <tbody>
            {% for sn, r in report.general_stats_html['rows']|dictsort %}
            <tr>
              <td class="sorthandle">||</td>
              <th class="rowheader">{{ sn }}</th>
              {%- for k, h in report.general_stats_html['headers'].items() %}
                {{ r[k] if r[k] else '<td class="'+k+'"></td>' }}
              {%- endfor -%}
            </tr>
            {%- endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
  {% endif %}

  {% for m in report.modules_output %}
    <div id="mqc-module-section-{{ m.anchor }}" class="mqc-module-section">
      <h2 id="{{ m.anchor }}">{{ m.name }}</h2>
      {{ m.intro if m.intro }}
      {% for s in m.sections %}
        <div class="mqc-section mqc-section-{{ m.anchor }}">
          <h3 id="{{ s['anchor'] }}">{{ s['name'] }}</h3>
          {{ s['content'] if s['content'] }}
          {{ '<hr>' if not loop.last }}
        </div>
    {% endfor %}
    </div>
    {{ '<hr>' if not loop.last }}
  {% endfor %}

</div>

<div class="footer">
  <div class="container-fluid">
    <p>
      <a href="http://www.scilifelab.se/" target="_blank" class="pull-right"><img src="data:image/png;base64,{{ include_file('assets/img/SciLifeLab.png', b64=True) }}" style="height:41px;"></a>
      <strong><a href="https://github.com/ewels/MultiQC" target="_blank">MultiQC v{{ config.version }}</a></strong> -
      Written by <a href="http://phil.ewels.co.uk" target="_blank">Phil Ewels</a>, available on <a href="https://github.com/ewels/MultiQC" target="_blank">GitHub</a>.</p>
    <p>The report uses <a href="http://www.highcharts.com/" target="_blank">HighCharts</a>, <a href="https://jquery.com/" target="_blank">jQuery</a>,
       <a href="http://getbootstrap.com/" target="_blank">Bootstrap</a>, <a href="https://github.com/gka/chroma.js" target="_blank">chroma.js</a>
       and <a href="http://bootstraptour.com/" target="_blank">Bootstrap Tour</a>.</p>
  </div>
</div>

<!-- General Stats Columns Modal -->
<div class="modal fade" id="general_stats_colsort_modal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">General Statistics: Columns</h4>
      </div>
      <div class="modal-body">
        <p>Uncheck the tick box to hide columns. Click and drag the handle on the left to change order.</p>
        <table class="table mqc_table" id="general_stats_colsort_table">
          <thead>
            <tr>
              <th class="sorthandle" style="text-align:center;">Sort</th>
              <th style="text-align:center;">Visible</th>
              <th>Module</th>
              <th>Column</th>
              <th>Description</th>
              <th>Scale</th>
            </tr>
          </thead>
          <tbody>
            {%- for m in report.general_stats -%}{%- for k in report.general_stats[m]['headers'].keys() %}
              <tr class="{{ report.general_stats[m]['headers'][k]['rid'] }}" style="background-color: rgba({{report.general_stats[m]['headers'][k]['modcol'] }}, 0.15);">
                <td class="sorthandle ui-sortable-handle">||</span></td>
                <td style="text-align:center;"><input class="general_stats_col_visible" type="checkbox" checked="checked" value="{{ report.general_stats[m]['headers'][k]['rid'] }}"></td>
                <td>{{ m }}</td>
                <td>{{ report.general_stats[m]['headers'][k]['title'] }}</td>
                <td>{{ report.general_stats[m]['headers'][k]['description'] }}</td>
                <td>{{ report.general_stats[m]['headers'][k]['shared_key'] }}</td>
              </tr>
            {%- endfor -%}{%- endfor -%}
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

</body>
</html>
